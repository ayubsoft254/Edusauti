{% extends 'base.html' %}

{% block title %}Password Reset Sent - EduSauti{% endblock %}

{% block meta_description %}Password reset instructions have been sent to your email{% endblock %}

{% block body_class %}bg-gradient-bg min-h-screen{% endblock %}

{% block extra_css %}
.auth-container {
    background: linear-gradient(135deg, rgba(153, 135, 111, 0.1) 0%, rgba(245, 243, 240, 0.8) 100%);
}

.auth-card {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(153, 135, 111, 0.2);
    box-shadow: 0 25px 50px rgba(153, 135, 111, 0.15);
}

.success-info {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.step-indicator {
    background: linear-gradient(135deg, #10b981, #059669);
}

.email-preview {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.1) 100%);
    border: 1px solid rgba(59, 130, 246, 0.2);
}

.help-card {
    background: linear-gradient(135deg, rgba(153, 135, 111, 0.05) 0%, rgba(245, 243, 240, 0.5) 100%);
    border: 1px solid rgba(153, 135, 111, 0.1);
}

.pulse-ring {
    animation: pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
}

@keyframes pulseRing {
    0% {
        transform: scale(0.8);
        opacity: 1;
    }
    80%, 100% {
        transform: scale(2.4);
        opacity: 0;
    }
}

.check-bounce {
    animation: checkBounce 1s ease-in-out;
}

@keyframes checkBounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}
{% endblock %}

{% block content %}
<div class="auth-container min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-lg w-full space-y-8">
        <!-- Header -->
        <div class="text-center scroll-reveal">
            <div class="flex items-center justify-center mb-6 relative">
                <div class="absolute w-20 h-20 bg-green-400 rounded-full opacity-20 pulse-ring"></div>
                <div class="text-5xl check-bounce">âœ…</div>
            </div>
            <h2 class="text-3xl font-bold text-edu-deep mb-2">
                Check your email
            </h2>
            <p class="text-edu-dark">
                We've sent password reset instructions to your email address
            </p>
        </div>

        <!-- Main Success Card -->
        <div class="auth-card rounded-2xl p-8 scroll-reveal">
            <!-- Success Info -->
            <div class="success-info rounded-xl p-6 mb-6">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1">
                        <h3 class="text-lg font-semibold text-green-800 mb-2">
                            Reset instructions sent!
                        </h3>
                        <p class="text-green-700 text-sm">
                            If an account with that email exists, you'll receive password reset instructions within the next few minutes.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="space-y-6">
                <h3 class="text-sm font-semibold text-edu-deep mb-4 flex items-center">
                    <i class="fas fa-list-ol mr-2 text-edu-beige"></i>
                    What to do next
                </h3>
                
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="step-indicator w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <span class="text-white text-xs font-bold">1</span>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-edu-deep">Check your email inbox</p>
                            <p class="text-xs text-edu-dark mt-1">Look for an email from EduSauti with reset instructions</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="step-indicator w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <span class="text-white text-xs font-bold">2</span>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-edu-deep">Click the reset link</p>
                            <p class="text-xs text-edu-dark mt-1">The link will be valid for 24 hours</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="step-indicator w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                            <span class="text-white text-xs font-bold">3</span>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-edu-deep">Create your new password</p>
                            <p class="text-xs text-edu-dark mt-1">Choose a strong, unique password</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Email Preview -->
            <div class="email-preview rounded-xl p-4 mt-6">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-envelope text-blue-500 text-lg"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="text-sm font-semibold text-blue-800 mb-1">
                            Email Subject: Reset your EduSauti password
                        </h4>
                        <p class="text-xs text-blue-700">
                            From: noreply@edusauti.com
                        </p>
                        <p class="text-xs text-blue-600 mt-2">
                            The email contains a secure link to reset your password. Don't share this link with anyone.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8">
                <a
                    href="{% url 'account_login' %}"
                    class="flex items-center justify-center px-6 py-3 border border-edu-beige text-edu-beige rounded-xl font-medium hover:bg-edu-beige hover:text-white transition-all hover-lift focus:outline-none focus:ring-4 focus:ring-edu-beige focus:ring-opacity-30"
                >
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Login
                </a>
                
                <button
                    onclick="checkEmail()"
                    class="flex items-center justify-center px-6 py-3 bg-edu-beige text-white rounded-xl font-medium hover:bg-edu-dark transition-all hover-lift focus:outline-none focus:ring-4 focus:ring-edu-beige focus:ring-opacity-30"
                >
                    <i class="fas fa-external-link-alt mr-2"></i>
                    Open Email App
                </button>
            </div>
        </div>

        <!-- Didn't Receive Email -->
        <div class="help-card rounded-2xl p-6 scroll-reveal">
            <h3 class="text-lg font-semibold text-edu-deep mb-4 text-center">
                Didn't receive the email?
            </h3>
            
            <div class="space-y-4">
                <div class="flex items-start space-x-3">
                    <i class="fas fa-search text-edu-beige mt-1"></i>
                    <div>
                        <p class="text-sm font-medium text-edu-deep">Check your spam folder</p>
                        <p class="text-xs text-edu-dark">Sometimes reset emails end up in junk/spam folders</p>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3">
                    <i class="fas fa-clock text-edu-beige mt-1"></i>
                    <div>
                        <p class="text-sm font-medium text-edu-deep">Wait a few minutes</p>
                        <p class="text-xs text-edu-dark">Email delivery can sometimes take up to 10 minutes</p>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3">
                    <i class="fas fa-envelope-open text-edu-beige mt-1"></i>
                    <div>
                        <p class="text-sm font-medium text-edu-deep">Check the email address</p>
                        <p class="text-xs text-edu-dark">Make sure you entered the correct email address</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 pt-4 border-t border-edu-beige border-opacity-20">
                <div class="text-center">
                    <p class="text-sm text-edu-dark mb-3">Still having trouble?</p>
                    <div class="flex flex-col sm:flex-row gap-3 justify-center">
                        <a
                            href="{% url 'account_reset_password' %}"
                            class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-edu-beige hover:text-edu-dark transition-colors"
                        >
                            <i class="fas fa-redo mr-2"></i>
                            Try again
                        </a>
                        <a
                            href="#contact"
                            class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-edu-beige hover:text-edu-dark transition-colors"
                        >
                            <i class="fas fa-headset mr-2"></i>
                            Contact support
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security Note -->
        <div class="bg-white rounded-2xl p-6 scroll-reveal">
            <div class="flex items-start space-x-3">
                <div class="flex-shrink-0">
                    <i class="fas fa-shield-alt text-edu-beige text-xl"></i>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-edu-deep mb-2">Security Notice</h3>
                    <p class="text-xs text-edu-dark leading-relaxed">
                        For your security, this reset link will expire in 24 hours. If you didn't request this password reset, you can safely ignore this email - your account remains secure.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
// Function to open default email client
function checkEmail() {
    // Try to open default email client
    try {
        window.location.href = 'mailto:';
        EduSauti.showToast('Opening your email app...', 'info');
    } catch (error) {
        EduSauti.showToast('Please check your email manually', 'info');
    }
}

// Auto-refresh reminder
let reminderTimeout;

document.addEventListener('DOMContentLoaded', function() {
    // Show reminder after 5 minutes to check email
    reminderTimeout = setTimeout(() => {
        EduSauti.showToast('Don\'t forget to check your email for the reset link!', 'info', 8000);
    }, 300000); // 5 minutes
    
    // Show success message
    setTimeout(() => {
        EduSauti.showToast('Password reset instructions sent successfully!', 'success');
    }, 500);
});

// Clear timeout if user leaves page
window.addEventListener('beforeunload', function() {
    if (reminderTimeout) {
        clearTimeout(reminderTimeout);
    }
});
{% endblock %}
{% endblock %}